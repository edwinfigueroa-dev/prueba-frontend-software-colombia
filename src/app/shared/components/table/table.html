<div class="grid grid-cols-12 p-0 m-0 relative">
  @if (optionsTable.isLoadingContent) {
    <div class="col-span-12 flex justify-center items-start py-4 absolute bg-black/10 top-0 left-0 right-0 z-50 bottom-0 rounded">
      <app-spinner [diameter]="40"></app-spinner>
    </div>
  }

  @if (dataSource.data && dataSource.data.length == 0) {
    <div class="col-span-12 text-center line-height-3 mb-5">
      <p class="m-0 p-0 text-lg font-bold">{{ optionsTable.emptyTable.title }}</p>
      <p class="m-0 p-0 text-base font-bold text-gray-500">{{ optionsTable.emptyTable.subtitle }}</p>
    </div>

  } @else {
    <div class="col-span-12 overflow-auto scroll py-0 px-0">
      <table mat-table [dataSource]="dataSource" matSort>
        @for (header of keyHeaderColumns; track header) {
          <div class="p-0 m-0">
            @if (header == 'actionsTable') {
              <ng-container [matColumnDef]="header" stickyEnd>
                <th mat-header-cell *matHeaderCellDef aria-label="row actions border-l! border-gray-200!">{{ optionsColumns[header].labelHeader }}</th>
                <td mat-cell *matCellDef="let element" [class]="'text-center! w-12! border-l! border-gray-200! ' + optionsTable.actionsTable.classStyleButtonMenuActions">
                  <div  class="flex flex-row gap-2!">
                    <button mat-menu-item class="rounded-lg flex! justify-center! items-center! px-0! text-center text-xs md:text-sm cursor-pointer!" (click)="onActionEvent(element)" [ngClass]="{ 'gap-1!': optionsTable.actionsTable.showAction?.labelAction }">
                      @if (optionsTable.actionsTable.showAction?.iconAction) {
                        <mat-icon class="mr-0! inline-block!">
                          <span class="material-symbols-outlined">{{ optionsTable.actionsTable.showAction?.iconAction }}</span>
                        </mat-icon>
                      }
                      <span class="inline-block!">{{ optionsTable.actionsTable.showAction?.labelAction }}</span>
                    </button>
                  </div>
                </td>
              </ng-container>

            } @else {
              <ng-container [matColumnDef]="header">
                <th mat-header-cell *matHeaderCellDef> {{ optionsColumns[header].labelHeader }} </th>
                @if (optionsColumns[header]?.capitalizeFirstLetter) {
                  <td mat-cell *matCellDef="let element">
                    {{ (optionsColumns[header].labelValue ? getNestedProperty(element, optionsColumns[header].labelValue) : element[header]) | capitalizeFirstLetter }}
                  </td>
                } @else {
                  <td mat-cell *matCellDef="let element">
                    {{ optionsColumns[header].labelValue ? getNestedProperty(element, optionsColumns[header].labelValue) : element[header] }}
                  </td>
                }
              </ng-container>
            }
          </div>
        }
        <tr mat-header-row id="table-header" *matHeaderRowDef="keyHeaderColumns" class="font-bold! text-base!"></tr>
        <tr mat-row id="table-body" *matRowDef="let row; columns: keyHeaderColumns;"></tr>
      </table>
    </div>

    <div class="col-span-12">
      <mat-paginator
        showFirstLastButtons
        class="pt-2! sm:pt-0! text-sm! sm:text-base!"
        [pageSizeOptions]="optionsTable.paginator.perPage!"
        [length]="optionsTable.paginator.length!"
        [pageSize]="optionsTable.paginator.pageSize!"
        [pageIndex]="optionsTable.paginator.pageIndex"
        (page)="onPageEvent($event)"
      >
      </mat-paginator>
    </div>
  }

</div>